<!DOCTYPE html>
<html>
<head>
<title>Checkout | LUMINA</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/data.js"></script>
<script src="js/app.js"></script>
<script src="js/auth.js"></script>
</head>
<body onload="protect();renderCheckout()">

<header>
<h2>LUMINA</h2>
<nav>
<a href="shop.html">Shop</a>
<a href="#" onclick="logout()">Logout</a>
</nav>
</header>

<div class="container">
<h2>Checkout</h2>

<div id="checkoutItems"></div>

<h3>Payment Details</h3>
<input placeholder="Card Number" style="width:100%;padding:12px"><br><br>
<input placeholder="MM / YY" style="width:48%;padding:12px">
<input placeholder="CVV" style="width:48%;padding:12px;float:right"><br><br>

<button onclick="placeOrder()">Place Order</button>
</div>

<script>
function renderCheckout(){
  let box = document.getElementById('checkoutItems');
  let total = 0;
  cart.forEach(p=>{
    total += p.price * p.qty;
    box.innerHTML += `<p>${p.name} Ã— ${p.qty}</p>`;
  });
  box.innerHTML += `<h3>Total: $${total}</h3>`;
}

function placeOrder(){
  let orders = JSON.parse(localStorage.getItem('orders')) || [];
  orders.push({
    id:Date.now(),
    total:cart.reduce((a,b)=>a+b.price*b.qty,0),
    date:new Date().toLocaleString()
  });
  localStorage.setItem('orders',JSON.stringify(orders));
  localStorage.removeItem('cart');
  window.location.href='success.html';
}

</script>

</body>
</html>
